# 产品升降级配置指南

本页面详细说明魔方财务中翼龙面板模块的升降级功能配置，帮助您为客户提供灵活的资源调整选项。

## 升降级功能概述

翼龙面板模块支持对现有服务进行升级或降级，允许客户根据需求调整服务器资源配置。通过此功能，客户可以在不重新开通服务的情况下，灵活调整服务器的各项参数。

## 启用升降级功能

要启用升降级功能，需要进行以下配置：

1. 登录魔方财务管理后台
2. 导航至：**产品管理** > **选择产品** > **编辑**
3. 在产品配置页面中，勾选"**允许升降级**"选项
4. 在升级选项中勾选"**升级本商品内的可配置选项**"
5. 保存产品配置

## 支持升降级的参数

以下是支持升降级的参数列表：

| 参数名称 | 传递类型 | 单位 | 用途 |
|---------|---------|------|------|
| **MEM_limitations** | 整数型 | GB | 运行内存分配 |
| **SWAP_limitations** | 整数型 | GB | 交换内存分配 |
| **CPU_limitations** | 整数型 | % | 中央处理器限制（100%=1核） |
| **DISK_limitations** | 整数型 | GB | 磁盘空间分配 |
| **piece** | 整数型 | - | IO权重（块IO权重） |
| **backups** | 整数型 | - | 备份数量 |
| **databases** | 整数型 | - | 数据库数量 |
| **allocations** | 整数型 | - | 网络分配限制 |

## 升降级流程说明

### 客户端升降级流程

1. 客户登录到魔方财务客户中心
2. 导航至服务详情页面
3. 点击"升级/降级"按钮
4. 在升降级页面选择需要调整的参数
5. 系统自动计算价格差异
6. 客户确认并支付差价（如有）
7. 系统自动调整服务器资源配置

### 管理员操作流程

1. 登录魔方财务管理后台
2. 导航至：**服务管理** > **选择服务**
3. 点击"升级/降级"按钮
4. 为客户选择新的配置参数
5. 确认操作，系统将自动调整服务器资源

## 升降级原理

当客户或管理员执行升降级操作时，系统会：

1. 向翼龙面板API发送资源调整请求
2. 翼龙面板接收请求并验证
3. 翼龙面板调整服务器资源配置
4. 返回操作结果到魔方财务系统
5. 魔方财务系统更新服务信息并通知客户

## 升降级注意事项

### 资源限制

1. **升级限制**：升级资源时，请确保节点有足够的可用资源
2. **降级限制**：降级资源时，确保不会影响服务器的正常运行

### 服务状态

1. 部分资源调整可能需要重启服务器才能生效
2. 建议在服务器负载较低时执行升降级操作

### 计费说明

1. 升级时，系统会按照剩余时间比例计算差价
2. 降级时，系统会按照剩余时间比例计算退款金额（如果启用了退款功能）
3. 可以在产品配置中设置升降级的价格调整规则

## 常见问题

### 升级失败的可能原因

1. 节点资源不足
2. 翼龙面板API连接异常
3. 服务器当前状态不允许调整资源

### 降级失败的可能原因

1. 新配置低于服务器最低运行要求
2. 服务器当前正在使用超过降级后的资源量

## 最佳实践

1. 为不同需求的客户提供合理的升降级选项
2. 设置适当的价格差异，鼓励客户根据实际需求选择合适的配置
3. 在产品描述中明确说明升降级功能，提高客户满意度
4. 定期检查节点资源使用情况，确保有足够的资源供客户升级使用